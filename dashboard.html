<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - PRISMA COKRO</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Rajdhani:wght@300;400;600&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="dashboard-style.css" />
</head>
<body>
  <header class="app-header">
    <div>
      <h1>Dashboard PRISMA COKRO</h1>
      <p class="subtitle"></p>
    </div>
    <div class="header-actions">
      <a href="index.html" class="btn-primary">KEMBALI</a>
    </div>
  </header>

  <main class="app-main">
    <section class="card">
      <h2>Input Parameter Pemrosesan Data</h2>
      <p class="subtitle">
        Isi Parameter di Bawah ini untuk Menghitung Risiko Privasi &amp; Mengevaluasi Kepatuhan terhadap UU PDP 2022 &amp; NIST CSF 2.0.
      </p>

      <form id="risk-form" class="form-grid">
        
        <div class="form-section">
          <h3 class="form-section-title">1. Informasi Skenario &amp; Platform</h3>

          <div class="form-group">
            <label for="scenarioName">Nama Skenario</label>
            <input
              type="text"
              id="scenarioName"
              placeholder="Contoh: Verifikasi Identitas Pengguna Baru"
            />
            <p class="field-hint">
              Beri Nama Singkat untuk Skenario Pemrosesan Data yang Sedang dianalisis.
            </p>
          </div>

          <div class="form-group">
            <label for="platformType">Jenis Platform/Layanan</label>
            <select id="platformType" required>
              <option value="">-- Pilih Jenis Platform --</option>
                <option value="bank">Bank/Lembaga Keuangan</option>
                <option value="fintech">Fintech</option>
                <option value="ecommerce">e-Commerce/Marketplace</option>
                <option value="travel">Travel & Transport</option>
                <option value="productivity">Produktivitas & Utilitas</option>
                <option value="education_health">Pendidikan & Kesehatan</option>
                <option value="entertainment">Hiburan & Sosial Media</option>
                <option value="game">Game Platform</option>
                <option value="biometric">Layanan Verifikasi Biometrik</option>
                <option value="lainnya">Lainnya (Website/Aplikasi Umum)</option>
            </select>
            <p class="field-hint">
              Digunakan untuk Analisis Legalitas.
            </p>
          </div>

          <div class="form-group">
            <label for="serviceName">Nama Layanan/Aplikasi</label>
            <input
              type="text"
              id="serviceName"
              placeholder="Contoh: Wondr By BNI, Shopee, Spotify, Roblox, Muamalat DIN"
            />
            <p class="field-hint">
              Masukkan Nama Resmi Layanan. Sistem akan Menyesuaikan Format Huruf Secara Otomatis.
            </p>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">2. Data Pribadi yang Diproses</h3>

          <div class="form-group">
            <label for="dataType">Jenis Data Pribadi Utama</label>
            <select id="dataType" required>
              <option value="">-- Pilih Jenis Data --</option>
              <option value="identitas">Identitas (KTP/SIM/NIK)</option>
              <option value="biometrik">Biometrik (Wajah, Suara)</option>
              <option value="umum">Data Umum (Nama, E-mail)</option>
              <option value="keuangan">Data Finansial</option>
              <option value="lokasi">Data Lokasi (GPS)</option>
              <option value="perilaku">Data Perilaku Pengguna</option>
              <option value="lainnya">Lainnya</option>
            </select>
          </div>

          <div class="form-group">
            <label>Jenis Data Spesifik yang Dikumpulkan (Untuk Analisis Legalitas)</label>

            <div class="inline-options checkbox-group custom-grid-legal">
              
              <div>
                <input type="checkbox" id="legal-ktp" name="legalDataCategory" value="ktp" class="hidden-input" />
                <label for="legal-ktp" class="btn-option">KTP / NIK</label>
              </div>
              <div>
                <input type="checkbox" id="legal-sim" name="legalDataCategory" value="sim" class="hidden-input" />
                <label for="legal-sim" class="btn-option">SIM / Paspor</label>
              </div>

              <div>
                <input type="checkbox" id="legal-nama" name="legalDataCategory" value="nama" class="hidden-input" />
                <label for="legal-nama" class="btn-option">Nama Lengkap</label>
              </div>
              <div>
                <input type="checkbox" id="legal-email" name="legalDataCategory" value="email" class="hidden-input" />
                <label for="legal-email" class="btn-option">Email / No. HP</label>
              </div>

              <div>
                <input type="checkbox" id="legal-alamat" name="legalDataCategory" value="alamat" class="hidden-input" />
                <label for="legal-alamat" class="btn-option">Alamat Rumah</label>
              </div>
              <div>
                <input type="checkbox" id="legal-lokasi" name="legalDataCategory" value="lokasi" class="hidden-input" />
                <label for="legal-lokasi" class="btn-option">Lokasi GPS</label>
              </div>

              <div>
                <input type="checkbox" id="legal-rekening" name="legalDataCategory" value="rekening" class="hidden-input" />
                <label for="legal-rekening" class="btn-option">Rekening Bank</label>
              </div>

              <div>
                <input type="checkbox" id="legal-selfie" name="legalDataCategory" value="selfie" class="hidden-input" />
                <label for="legal-selfie" class="btn-option">Selfie Wajah</label>
              </div>
              <div>
                <input type="checkbox" id="legal-wajah" name="legalDataCategory" value="wajah" class="hidden-input" />
                <label for="legal-wajah" class="btn-option">Scan Wajah</label>
              </div>
              <div>
                <input type="checkbox" id="legal-suara" name="legalDataCategory" value="suara" class="hidden-input" />
                <label for="legal-suara" class="btn-option">Rekaman Suara</label>
              </div>
            </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">3. Aktivitas &amp; Tujuan Pemrosesan</h3>

          <div class="form-group">
            <label for="processingActivity">Aktivitas Pemrosesan Utama</label>
            <select id="processingActivity" required>
              <option value="">-- Pilih Aktivitas --</option>
              <option value="collection">Pengumpulan Data</option>
              <option value="storage">Penyimpanan Data</option>
              <option value="verification">Verifikasi Identitas</option>
              <option value="analysis">Analisis/Pemantauan Aktivitas</option>
              <option value="sharing">Berbagi ke Pihak Lain</option>
              <option value="transmission">Pengiriman Data</option>
              <option value="deletion">Penghapusan/Pemusnahan Data</option>
            </select>
          </div>

          <div class="form-group">
            <label for="processingPurpose">Tujuan Utama Pemrosesan Data</label>
            <select id="processingPurpose" required>
              <option value="">-- Pilih Tujuan Utama --</option>
              <option value="verifikasi_identitas">Verifikasi Identitas/Umur Pengguna</option>
              <option value="penyediaan_layanan">
                Menyediakan Layanan Inti (misalnya akses fitur aplikasi)
              </option>
              <option value="keamanan_pencegahan_penipuan">
                Keamanan &amp; Pencegahan Penipuan
              </option>
              <option value="penagihan_pembayaran">
                Penagihan &amp; Pengelolaan Pembayaran
              </option>
              <option value="personalisasi">
                Personalisasi Tampilan/Rekomendasi Konten
              </option>
              <option value="pemasaran">
                Pemasaran/Promosi (E-mail, Notifikasi, Iklan)
              </option>
              <option value="analitik">
                Analitik &amp; Statistik Penggunaan
              </option>
            </select>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">4. Legalitas &amp; Tata Kelola</h3>
          
          <div class="form-group">
            <label>Apakah Melibatkan Pihak Ketiga (Vendor/Cloud/Mitra)?</label>
            
            <div class="inline-options checkbox-group">
              <div>
                <input type="radio" id="thirdparty-yes" name="thirdParty" value="yes" class="hidden-input" />
                <label for="thirdparty-yes" class="btn-option">YA</label>
              </div>

              <div>
                <input type="radio" id="thirdparty-no" name="thirdParty" value="no" class="hidden-input" />
                <label for="thirdparty-no" class="btn-option">TIDAK</label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Apakah Tujuan Pengumpulan Data dijelaskan dengan Jelas ke Pengguna?</label>
            
            <div class="inline-options checkbox-group">
              <div>
                <input type="radio" id="purpose-yes" name="purposeSpecified" value="yes" class="hidden-input" />
                <label for="purpose-yes" class="btn-option">
                  Ya, Dijelaskan di Awal (Privacy Policy)
                </label>
              </div>

              <div>
                <input type="radio" id="purpose-no" name="purposeSpecified" value="no" class="hidden-input" />
                <label for="purpose-no" class="btn-option">
                  Tidak Dijelaskan Secara Jelas
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">5. Pengamanan Teknis &amp; Organisasi</h3>

          <div class="form-group">
            <label for="encryption">Cara Melindungi Data dengan Enkripsi</label>
            <select id="encryption" required>
              <option value="">-- Pilih Kondisi --</option>
              <option value="none">Tidak Dikunci (Polosan/Teks Biasa)</option>
              <option value="in_transit">
                Dikunci Saat dikirim (Ada Gembok/HTTPS)
              </option>
              <option value="at_rest">
                Dikunci Saat disimpan di Server (Database diacak)
              </option>
              <option value="both">
               Dikunci Super Ketat (Saat Dikirim &amp; Disimpan)
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="accessControl">Kontrol Akses ke Data</label>
            <select id="accessControl" required>
              <option value="">-- Pilih Jenis Akses --</option>
              <option value="none">Tidak Ada Kontrol Akses Formal</option>
              <option value="basic">Dasar (Hanya Username/Password)</option>
              <option value="role_based">
                Berbasis Peran (Hanya Orang Tertentu yang Boleh Mengakses)
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="authMethod">Metode Login/Autentikasi Pengguna</label>
            <select id="authMethod" required>
              <option value="">-- Pilih Metode --</option>
              <option value="none">Tidak Ada Autentikasi Khusus</option>
              <option value="password_only">Hanya Pakai Password/PIN Biasa</option>
              <option value="password_mfa">
                Password + Kode OTP (SMS/WA/App)
              </option>
              <option value="sso">
                Login Lewat Pihak Ketiga (SSO)
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="consentType">Cara Meminta Persetujuan (Consent) Pengguna</label>
            <select id="consentType" required>
              <option value="">-- Pilih Cara Consent --</option>
              <option value="none">Tidak ditanya Persetujuan Sama Sekali</option>
              <option value="implicit">
                Langsung Setuju Otomatis Saat Daftar
              </option>
              <option value="explicit">
                Jelas &amp; Spesifik (Ada Checkbox/Tombol Setuju)
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="privacyPolicy">
              Apakah Ada Kebijakan Privasi/Aturan Tertulis Tentang Pengelolaan Data?
            </label>
            <select id="privacyPolicy" required>
              <option value="">-- Pilih Kondisi --</option>
              <option value="none">Tidak Ada Dokumen Kebijakan Privasi</option>
              <option value="informal">Ada, tapi Belum Rapi/Belum Konsisten</option>
              <option value="formal">
                Ada, Tertulis &amp; Sudah Disosialisasikan
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="incidentResponsePlan">
              Jika Terjadi Kebocoran Data, Apakah Ada Rencana Apa yang Harus Dilakukan?
            </label>
            <select id="incidentResponsePlan" required>
              <option value="">-- Pilih Kondisi --</option>
              <option value="not_available">Tidak Ada Rencana Tertulis</option>
              <option value="documented">Ada Dokumen Rencana, tapi Jarang Diuji</option>
              <option value="tested_regularly">
                Ada Rencana &amp; Diuji Secara Berkala
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="detectSystem">
              Apakah Ada Sistem untuk Memantau dan Mendeteksi Insiden Keamanan?
            </label>
            <select id="detectSystem" required>
              <option value="">-- Pilih Kondisi --</option>
              <option value="none">Tidak Ada Pemantauan Khusus</option>
              <option value="basic">
                Ada Log Dasar (misalnya Log Akses), tapi Jarang dicek
              </option>
              <option value="advanced">
                Ada Pemantauan Rutin/Alat Khusus (SIEM, alert otomatis, dsb)
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="backupPolicy">
              Apakah Ada Backup dan Rencana Pemulihan Data Jika Terjadi Masalah?
            </label>
            <select id="backupPolicy" required>
              <option value="">-- Pilih Kondisi --</option>
              <option value="none">Tidak Ada Backup</option>
              <option value="backups">
                Ada Backup, tapi Belum Pernah diuji Proses Pemulihannya
              </option>
              <option value="tested">
                Ada Backup &amp; Proses Pemulihan Sudah Pernah diuji
              </option>
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-primary">
            Hitung Risiko
          </button>
          
          <button type="button" id="btn-save" class="btn-secondary">
            Simpan Draft
          </button>
          
          <button type="button" id="btn-history" class="btn-secondary">
            Riwayat Penilaian
          </button>
          
          <button type="reset" class="btn-secondary" id="reset-btn">
            Reset
          </button>
        </div>
      </form>
    </section>

    <section id="history-panel" class="card" style="display: none; border: 1px dashed var(--accent);">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
        <h3 style="margin:0; font-size:1rem; color:var(--accent);">Daftar Riwayat Penilaian</h3>
        <button type="button" id="btn-close-history" style="background:none; border:none; color:var(--text-muted); cursor:pointer;">❌</button>
      </div>
      
      <div id="history-list" style="display:flex; flex-direction:column; gap:0.5rem; max-height:300px; overflow-y:auto;">
        </div>
      
      <div style="margin-top:1rem; text-align:right;">
        <button type="button" id="btn-clear-history" style="font-size:0.75rem; color:var(--bad); background:none; border:1px solid var(--bad); padding:5px 10px; border-radius:4px; cursor:pointer;">
          Hapus Semua Riwayat
        </button>
      </div>
    </section>

    <section class="results-grid">
      <article class="card" id="summary-card">
        <h2>Ringkasan Risiko</h2>
        <div id="summary-content" class="summary-content placeholder">
          Isi Parameter di Atas, Kemudian Klik <strong>Hitung Risiko</strong> untuk Melihat Hasil Analisis.
        </div>
      </article>

      <article class="card">
        <h2>Matriks Likelihood–Impact</h2>
        <div id="matrix-legend">
          <span class="legend low">Rendah</span>
          <span class="legend medium">Sedang</span>
          <span class="legend high">Tinggi</span>
        </div>
        <div id="risk-matrix" class="risk-matrix"></div>
        <p class="matrix-caption">
          Sumbu Vertikal: Impact (1–5), Sumbu Horizontal: Likelihood (1–5). Kotak dengan Highlight Berwarna Putih Menunjukkan Posisi Risiko Skenario Saat Ini.
        </p>
      </article>

      <article class="card">
        <h2>Evaluasi Kepatuhan UU PDP 2022</h2>
        <div id="pdp-results" class="table-wrapper placeholder">
          Belum Ada Data. Jalankan Analisis Terlebih Dahulu.
        </div>
      </article>

      <article class="card">
        <h2>Pemetaan NIST Cybersecurity Framework 2.0</h2>
        <div id="nist-results" class="table-wrapper placeholder">
          elum Ada Data. Jalankan Analisis Terlebih Dahulu.
        </div>
      </article>

      <article class="card">
        <h2>Rekomendasi Otomatis</h2>
        <div id="recommendations" class="table-wrapper placeholder">
          Belum Ada Rekomendasi. Jalankan Analisis Terlebih Dahulu.
        </div>
      </article>
    </section>
  </main>

  <script src="rules.js"></script>
  <script src="legalCheck.js"></script>
  <script src="riskEngine.js"></script>
  <script src="app.js"></script>
</body>
</html>
